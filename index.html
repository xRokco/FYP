<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Basic Page Needs
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <meta charset="utf-8">
        <title>Skeleton: Responsive CSS Boilerplate</title>
        <meta name="description" content="">
        <meta name="author" content="">

        <!-- Mobile Specific Metas
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- FONT
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <link href='//fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>

        <!-- CSS
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/skeleton.css">
        <link rel="stylesheet" href="css/custom.css">
        <link rel="stylesheet" href="css/farbtastic.css" type="text/css">

        <!-- Scripts
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="js/site.js"></script>
        <script type="text/javascript" src="js/farbtastic.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $('#colorpicker').farbtastic('#colorvalue');

                $('.farbtastic').click(function() {
                    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec($('#colorvalue').val());
                    r = parseInt(result[1], 16);
                    g = parseInt(result[2], 16);
                    b = parseInt(result[3], 16);
                    $("#rvalue").val(r);
                    $("#gvalue").val(g);
                    $("#bvalue").val(b);

                    console.log([r, g, b]);
                    r /= 255, g /= 255, b /= 255;
                    var max = Math.max(r, g, b), min = Math.min(r, g, b);
                    var h, s, l = (max + min) / 2;

                    if(max == min){
                        h = s = 0; // achromatic
                    }else{
                        var d = max - min;
                        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                        switch(max){
                            case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                            case g: h = (b - r) / d + 2; break;
                            case b: h = (r - g) / d + 4; break;
                        }
                        h /= 6;
                    }

                    $("#hvalue").val(h);
                    $("#svalue").val(s);
                    $("#lvalue").val(l);
                });

                $(".rgbvalue").change(function() {
                    if(parseInt($(this).val()) < 0 || parseInt($(this).val()) > 255) {
                        return;
                    }

                    r = parseInt($("#rvalue").val());
                    g = parseInt($("#gvalue").val());
                    b = parseInt($("#bvalue").val());
            
                    hexr = ("00" + r.toString(16)).substr(-2);
                    hexg = ("00" + g.toString(16)).substr(-2);
                    hexb = ("00" + b.toString(16)).substr(-2);

                    $.farbtastic('#colorpicker').setColor('#'+hexr+hexg+hexb);
                });

                $(".hslvalue").change(function() {
                    if(parseFloat($(this).val()) < 0 || parseFloat($(this).val()) > 1) {
                        return;
                    }

                    h = parseFloat($("#hvalue").val());
                    s = parseFloat($("#svalue").val());
                    l = parseFloat($("#lvalue").val());

                    $.farbtastic('#colorpicker').setHSL([h,s,l]);
                    console.log($.farbtastic('#colorpicker').hsl);
                });
            });

        </script>
        <!-- Favicon
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <link rel="icon" type="image/png" href="dist/images/favicon.png">

    </head>
    <body>
        <header>
            <nav class="navbar">
                <ul class="navbar-list">
                    <li class="navbar-item">
                        <a class="navbar-link" href="#" data-popover="#fileMenu">File</a>
                        <div id="fileMenu" class="popover">
                            <ul class="popover-list">
                                <li class="popover-item">
                                    <a class="popover-link" href="#grid">New</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#" data-popover="#editMenu">Edit</a>
                        <div id="editMenu" class="popover">
                            <ul class="popover-list">
                                <li class="popover-item">
                                    <a class="popover-link" href="#grid">Rotate</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#" data-popover="#imageMenu">Image</a>
                        <div id="imageMenu" class="popover">
                            <ul class="popover-list">
                                <li class="popover-item">
                                    <a class="popover-link" href="#grid">Export</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#" data-popover="#helpMenu">Help</a>
                        <div id="helpMenu" class="popover">
                            <ul class="popover-list">
                                <li class="popover-item">
                                    <a class="popover-link" href="#grid">About</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </header>
        <div class="tools">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
            <img class="tool" src="images/tools/man.png">
        </div>

        <div class="colorwrapper">
            <div id="colorpicker"></div>
            <br/>
            <form><input type="text" id="colorvalue" name="color" value="#000000" autocomplete="off" /></form>
            <form>
                <label>r: <input type="text" class="rgbvalue" id="rvalue" name="rvalue" value="0" autocomplete="off" /></label>
                <label>g: <input type="text" class="rgbvalue" id="gvalue" name="gvalue" value="0" autocomplete="off" /></label>
                <label>b: <input type="text" class="rgbvalue" id="bvalue" name="bvalue" value="0" autocomplete="off" /></label>
            </form>
            <form>
                <label>h: <input type="text" class="hslvalue" id="hvalue" name="hvalue" value="0" autocomplete="off" /></label>
                <label>s: <input type="text" class="hslvalue" id="svalue" name="svalue" value="0" autocomplete="off" /></label>
                <label>l: <input type="text" class="hslvalue" id="lvalue" name="lvalue" value="0" autocomplete="off" /></label>
            </form>
        </div>
        <canvas id="canvas" width="800" height="500"></canvas>

        <footer>
            <script>
                var c = document.getElementById("canvas");
                var ctx = c.getContext("2d");
                ctx.moveTo(0,0);
                ctx.lineTo(200,100);
                ctx.stroke();
                ctx.moveTo(200,100);
                ctx.lineTo(300,100);
                ctx.stroke();
                ctx.moveTo(300,100);
                ctx.lineTo(300,400);
                ctx.stroke();
                ctx.beginPath();
                ctx.arc(95,50,40,0,2*Math.PI);
                ctx.stroke();
                ctx.font = "60px Raleway";
                ctx.fillText("Hello World",100,200);
            </script> 
        </footer>
    </body>
