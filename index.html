<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Basic Page Needs
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <meta charset="utf-8">
        <title>Stijl.cf</title>
        <meta name="description" content="">
        <meta name="author" content="">
        <meta content='user-scalable=0' name='viewport' />

        <!-- Mobile Specific Metas
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- FONT
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

        <!-- CSS
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/skeleton.css">
        <link rel="stylesheet" href="css/custom.css">
        <link rel="stylesheet" href="css/farbtastic.css">
        <link rel="stylesheet" href="css/keys.css">
        <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
        
        <!-- Scripts
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script src="js/farbtastic.js"></script>
        <script src="js/fabric.js"></script>

        <!-- Favicon
        –––––––––––––––––––––––––––––––––––––––––––––––––– -->
        <link rel="icon" type="image/png" href="images/favicon.jpg">

    </head>
    <body>
        <header>
            <nav class="navbar">
                <ul class="navbar-list">
                    <li class="navbar-item">
                        <a class="navbar-link" href="#" data-popover="#fileMenu">File</a>
                        <div id="fileMenu" class="popover">
                            <ul class="popover-list">
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="newCanvasButton" title="Ctrl + B">New</a>
                                </li>
                                <li class="popover-item">
                                    <label for="background">
                                        <p id="open-label" class="popover-link" title="Ctrl + O">Set canvas background</p>
                                    </label>
                                    <input id="background" type="file"/>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="importButton" title="Ctrl + I">Import</a>
                                </li>
                                <li class="popover-item">
                                    <a href="#" onclick="return false;" class="popover-link" id="exportButton" title="Ctrl + S">Export</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#" data-popover="#editMenu">Edit</a>
                        <div id="editMenu" class="popover">
                            <ul class="popover-list">
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="cut" title="Ctrl + X">Cut</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="copy" title="Ctrl + C">Copy</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="paste" title="Ctrl + V">Paste</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#" data-popover="#viewMenu">View</a>
                        <div id="viewMenu" class="popover">
                            <ul class="popover-list">
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="zoomIn" title="Ctrl + =">Zoom In</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="zoomOut" title="Ctrl + -">Zoom Out</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="resetZoom" title="Ctrl + 0">Reset Zoom</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="panUp" title="Ctrl + ↑">Pan Up</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="panDown" title="Ctrl + ↓">Pan Down</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="panLeft" title="Ctrl + ←">Pan Left</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="panRight" title="Ctrl + →">Pan Right</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="resetPan" title="Ctrl + backspace">Reset Pan</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#" data-popover="#imageMenu">Image</a>
                        <div id="imageMenu" class="popover">
                            <ul class="popover-list">
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="filterButton">Change background filters</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="rotateCW">Rotate 90° Clockwise</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="rotateCCW">Rotate 90° Counterclockwise</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="flipY">Flip Vertically</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="flipX">Flip Horizontally</a>
                                </li>
                                <li class="popover-item">
                                    <a class="popover-link" href="#" onclick="return false;" id="resizeButton">Canvas Size...</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li class="navbar-item">
                        <a class="navbar-link" href="#" data-popover="#helpMenu">Help</a>
                        <div id="helpMenu" class="popover">
                            <ul class="popover-list">
                                <li class="popover-item">
                                    <a class="popover-link" href="about" target="_blank">About</a>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </nav>
        </header>
        <div id="outer-tools" class="outer-drag">
            <div class="tools inner-drag">
                <img id="drawing-mode" class="tool" src="images/tools/pencil.png" title="brush tool" alt="Pencil icon to enable line drawing mode">
                <label for="selectFile" title="add image">
                    <img class="tool" onclick="hideOptions()" src="images/tools/image.png" alt="image icon to open the upload image dialogue">
                </label>
                <input id="selectFile" type="file"/>
                <img id="rectangle-mode" class="tool" src="images/tools/rectangle.png" title="rectangle draw tool" alt="rectangle icon to enable rectangle draw tool">
                <img id="circle-mode" class="tool" src="images/tools/circle.png" title="circle draw tool" alt="circle icon to enable circle draw tool">
                <img id="select-mode" class="tool" src="images/tools/select.png" title="object select tool" alt="hand icon to enable object selection tool">
                <img id="text-mode" class="tool" src="images/tools/text.png" title="text tool" alt="T icon to enable text draw tool"> 
                <img id="eyedropper-mode" class="tool" src="images/tools/eyedropper.png" title="eyedropper tool" alt="eyedropper icon to enable eyedropper tool"> 
                <img id="crop-mode" class="tool" src="images/tools/crop.png" title="crop tool" alt="cropping icon to enable crop tool">
            </div>
        </div>

        <div id="outer-toolOptions" class="outer-drag">
            <div class="inner-drag toolOptions">
                <div style="display: none;" id="drawing-mode-options" class="options">
                    <label for="drawing-line-width">Line width</label>
                    <input type="range" value="10" min="0" max="150" id="drawing-line-width"><br/>
                </div>
                <div style="display: none;" id="shape-mode-options" class="options">
                    <label for="shape-line-width">Line width</label>
                    <input type="range" value="10" min="0" max="150" id="shape-line-width"><br/>
                    <input type="checkbox" id="shape-fill"  >
                    <label class="inline" for="shape-fill"><span></span>Fill</label>
                    <br/>
                </div>
                <div style="display: none;" id="locklab" class="options">
                    <span></span>
                    <input type="checkbox" id="lock">
                    <label for="lock" class="inline"><span></span>Lock aspect ratio</label>
                </div>
                <div style="display: none;" id="straightlab" class="options">
                    <span></span>
                    <input type="checkbox" id="straight">
                    <label for="straight" class="inline"><span></span>Straight line</label>
                </div>
                <div style="display: none;" id="filter-options" class="filters options">
                    <span></span>
                    <input type="checkbox" id="grayscale" data-filter="0">
                    <label for="grayscale" class="inline"><span></span>Greyscale</label>
                    <br/>
                    <input type="checkbox" id="sepia" data-filter="1">
                    <label for="sepia" class="inline"><span></span>Sepia</label>
                    <br/>
                    <input type="checkbox" id="invert" data-filter="2">
                    <label for="invert" class="inline"><span></span>Invert</label>
                </div>
                <div style="display: none;" id="text-mode-options" class="options">
                    <label for="text">Text</label><textarea name="text" id="text"></textarea>
                    <span></span>
                    <input id="italic" type="checkbox" name="italic"/>
                    <label for="italic" class="inline"><span></span>Italic</label>
                    <input id="bold" type="checkbox" name="bold">
                    <label for="bold" class="inline"><span></span>Bold</label>
                    <label for="font">Font</label>
                    <select id="font">
                        <option value="Lato">Lato</option>
                        <option value="Arial">Arial</option>
                        <option value="Arial Black">Arial Black</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Courier New">Courier New</option>
                        <option value="Comic Sans MS">Comic Sans MS</option>
                        <option value="Impact">Impact</option>
                        <option value="Verdana">Verdana</option>
                        <option value="Trebuchet MS">Trebuchet MS</option>
                        <option value="Lucida Console, Monaco, monospace">Lucida Console</option>
                        <option value="Webdings">Webdings</option>
                    </select>
                    <label for="outline">Outline color</label>
                    <input id="outline" type="text" name="outline">
                </div>
            </div>
        </div>

        <div id="zoom" title="Ctrl+= to zoom in, Ctrl+- to zoom out, Ctrl+0 to reset zoom.">Zoom level: 1</div>
        <div id="pan" title="Ctrl+Arrow keys to pan, Ctrl+backspace to reset pan.">Relative pan: 0, 0</div>
        <div id="pos" title="Position of the top left corner of an object relative to the top left corner of the canvas."></div>
        <div id="size" title="Width x height of the object."></div>

        <div id="outer-colorwrapper" class="outer-drag">
            <div class="colorwrapper inner-drag">
                <div id="colorpicker"></div>
                <br/>
                <input type="text" id="colorvalue" name="color" value="#000000" autocomplete="off" />
                <form class="row">
                    <label class="four columns">R: <input type="text" class="rgbvalue" id="rvalue" name="rvalue" value="0" autocomplete="off" /></label>
                    <label class="four columns">G: <input type="text" class="rgbvalue" id="gvalue" name="gvalue" value="0" autocomplete="off" /></label>
                    <label class="four columns">B: <input type="text" class="rgbvalue" id="bvalue" name="bvalue" value="0" autocomplete="off" /></label>
                </form>
                <form class="row">
                    <label class="four columns">H: <input type="text" class="hslvalue" id="hvalue" name="hvalue" value="0" autocomplete="off" /></label>
                    <label class="four columns">S: <input type="text" class="hslvalue" id="svalue" name="svalue" value="0" autocomplete="off" /></label>
                    <label class="four columns">L: <input type="text" class="hslvalue" id="lvalue" name="lvalue" value="0" autocomplete="off" /></label>
                </form>
            </div>
        </div>

        <div id="outer-layers" class="outer-drag">
            <div id="layers" class="inner-drag">
            
            </div>
        </div>
    
        <div id="canvasWrapper">
            <canvas id="c" style="border:1px solid silver" width="800" height="500"></canvas>
        </div>

        <img id="keyboard-icon" src="images/keyboard.png" alt="Keyboard icon to display keyboard shortcuts">

        <div id="exportModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content drag">
                <!--<div class="modal-close-icon">-->
                <a href="#" onclick="return false;" class="close"><i class="fa fa-times"></i></a>
                <h4>Export as...</h4>
                <ul>
                    <li><a href="#" onclick="return false;" class="export" value="png">PNG</a> - Good for images with text and fine details. Crucial for transparency but provides large file sizes.</li>
                    <li><a href="#" onclick="return false;" class="export" value="jpeg">JPG</a> - Good for general pictures and photos without transparency, compressed down to a lightweight package.</li>
                    <li><a href="#" onclick="return false;" class="export" value="json">JSON</a> - Specially formatted text which allows you to save your image editing progress to pick it up again later.</li>
                </ul>
                
            </div>
        </div>

        <div id="filterModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content drag">
                <!--<div class="modal-close-icon">-->
                <a href="#" onclick="return false;" class="close"><i class="fa fa-times"></i></a>
                <h4>Background image filters...</h4>
                <p id="filter-warning">These filters only apply to the canvas's background image. Your canvas doesn't have one currently.</p>
                <ul class="background-filter-options">
                    <li>
                        <input type="checkbox" id="bggrayscale" data-filter="0">
                        <label for="bggrayscale" class="inline"><span></span>Greyscale</label>
                    </li>
                    <li>
                        <input type="checkbox" id="bgsepia" data-filter="1">
                        <label for="bgsepia" class="inline"><span></span>Sepia</label>
                    </li>
                    <li>
                        <input type="checkbox" id="bginvert" data-filter="2">
                        <label for="bginvert" class="inline"><span></span>Invert</label>
                    </li>
                </ul>
            </div>
        </div>

        <div id="mobileModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content drag">
                <!--<div class="modal-close-icon">-->
                <a href="#" onclick="return false;" class="close"><i class="fa fa-times"></i></a>
                <h1>Warning!</h1>
                <h2>This webapp is designed only for laptops and computers and probably won't work very well if you're on a phone. If you want to try it out anyway be my guest, but be warned, it won't be pretty.</h2>
                <br/>
                <button class="button-primary close center">Let me at it.</button>
            </div>
        </div>

        <div id="jsonModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
                <a href="#" onclick="return false;" class="closeJSON"><i class="fa fa-times"></i></a>
                <h4>JSON...</h4>
                <pre><code id="json"></code></pre>
                <input class="button-primary" id="select" value="Select all" type="submit">
            </div>
        </div>

        <div id="newCanvasModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content drag">
                <!--<div class="modal-close-icon">-->
                <a href="#" onclick="return false;" class="close"><i class="fa fa-times"></i></a>
                <h4>New canvas...</h4>
                <form class="form">
                    <div class="row">
                        <div class="six columns">
                            <label for="resizewidth">Width</label> <input type="number" name="width" id="width"><br>
                        </div>
                        <div class="six columns">
                            <label for="resizeheight">Height</label><input type="number" name="height" id="height"><br>
                        </div>
                    </div>
                    <div class="row" style="border-bottom: 1px solid silver;padding-bottom: 15px;margin-bottom: 15px;">
                        <div class="six columns">
                            <label for="bgcolour">Background colour</label> <input type="text" name="bgcolour" id="bgcolour">
                        </div>
                        <div class="six columns">
                            <input type="checkbox" name="transparent" id="transparent"><label for="transparent"><span></span>Transparent background</label>
                        </div>
                    </div>

                    <input class="button-primary" id="newCanvas" value="Create" type="submit">
                </form>
            </div>
        </div>

        <div id="resizeModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content drag">
                <!--<div class="modal-close-icon">-->
                <a href="#" onclick="return false;" class="close"><i class="fa fa-times"></i></a>
                <h4>Resize canvas...</h4>
                <form class="form">
                    <div class="row">
                        <div class="six columns">
                            <label for="resizeWidth">Width</label> <input type="number" name="resizeWidth" id="resizeWidth">
                        </div>
                        <div class="six columns">
                            <input type="checkbox" name="resizeLocked" id="resizeLocked"><label for="resizeLocked"><span></span>Lock rezise aspect ratio</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="six columns">
                            <label for="resizeHeight">Height</label><input type="number" name="resizeHeight" id="resizeHeight">
                        </div>
                        <div class="six columns">
                            <select id="resizeType">
                                <option value="px">px</option>
                                <option value="percent">%</option>
                            </select>
                        </div>
                    </div>
                    <div class="row" style="border-bottom: 1px solid silver;padding-bottom: 15px;margin-bottom: 15px;">
                        <div class="six columns">
                            <label for="resizeBgcolour">Background colour</label> <input type="text" name="resizeBgcolour" id="resizeBgcolour">
                        </div>
                        <div class="six columns">
                            <input type="checkbox" name="resizeTransparent" id="resizeTransparent"><label for="resizeTransparent"><span></span>Transparent background</label>
                        </div>
                    </div>

                    <input class="button-primary" id="resizeCanvas" value="Create" type="submit">
                </form>
            </div>
        </div>

        <div id="keyboardModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content">
                <!--<div class="modal-close-icon">-->
                <h4>Keyboard shortcuts...</h4>
                <div class="row">
                    <div class="six columns">
                        <p><kbd>ctrl</kbd> + <kbd>=</kbd> - zoom in.</p>
                        <p><kbd>ctrl</kbd> + <kbd>-</kbd> - zoom out.</p>
                        <p><kbd>ctrl</kbd> + <kbd>0</kbd> - reset zoom to 100%.</p>
                        <p><kbd>del</kbd> - delete selected object or group.</p>
                        <p><kbd>&uarr;</kbd> - move selected object or group up.</p>
                        <p><kbd>&darr;</kbd> - move selected object or group down.</p>
                        <p><kbd>&larr;</kbd> - move selected object or group left.</p>
                        <p><kbd>&rarr;</kbd> - move selected object or group right.</p>
                        <p><kbd>ctrl</kbd> + <kbd>I</kbd> - import from JSON.</p>
                        <p><kbd>ctrl</kbd> + <kbd>O</kbd> - open image.</p>
                    </div>
                    <div class="six columns">
                        <p><kbd>ctrl</kbd> + <kbd>&uarr;</kbd> - pan canvas up.</p>
                        <p><kbd>ctrl</kbd> + <kbd>&darr;</kbd> - pan canvas down.</p>
                        <p><kbd>ctrl</kbd> + <kbd>&larr;</kbd> - pan canvas left.</p>
                        <p><kbd>ctrl</kbd> + <kbd>&rarr;</kbd> - pan canvas right.</p>
                        <p><kbd>ctrl</kbd> + <kbd>backspace</kbd> - reset pan to center.</p>
                        <p><kbd>ctrl</kbd> + <kbd>C</kbd> - copy selected object or group.</p>
                        <p><kbd>ctrl</kbd> + <kbd>X</kbd> - cut selected object or group.</p>
                        <p><kbd>ctrl</kbd> + <kbd>V</kbd> - pasted object or group.</p>
                        <p><kbd>ctrl</kbd> + <kbd>S</kbd> - export image.</p>
                        <p><kbd>ctrl</kbd> + <kbd>B</kbd> - new canvas.</p>
                    </div>
                </div>
            </div>
        </div>

        <div id="importModal" class="modal">
            <!-- Modal content -->
            <div class="modal-content drag">
                <!--<div class="modal-close-icon">-->
                <a href="#" onclick="return false;" class="close"><i class="fa fa-times"></i></a>
                <h4>Import from JSON...</h4>
                <div class="row">
                    <div class="twelve columns">
                        <textarea id="importJSON"></textarea>
                    </div>
                    <input class="button-primary" id="import" value="Import" type="submit">
                </div>
            </div>
        </div>

        <footer>
            <!-- More Scripts
            –––––––––––––––––––––––––––––––––––––––––––––––––– -->
            <script src="js/colorpicker.js"></script>
            <script src="js/auxillary.js"></script>
            <script src="js/canvas.js"></script>
            <script src="js/modal.js"></script>
        </footer>
    </body>
</html>